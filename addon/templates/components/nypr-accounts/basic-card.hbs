{{#nypr-card classNames="nypr-basic-info" title="Basic Info" edit=(action (mut isEditing) true)}}
  {{#unless isEditing}}
    {{nypr-input
      label='Name'
      fieldname='fullName'
      value=(concat changeset.givenName ' ' changeset.familyName)
      disabled=true
    }}
  {{else}}
    {{nypr-input
      label='First Name'
      placeholder='Jane'
      fieldname='givenName'
      value=changeset.givenName
      errors=changeset.error.givenName.validation
    }}
    {{nypr-input
      label='Last Name'
      placeholder='Doe'
      fieldname='familyName'
      value=changeset.familyName
      errors=changeset.error.familyName.validation
    }}
  {{/unless}}

  {{nypr-input
    label='Public Handle (visible when you comment on the site)'
    fieldname='preferredUsername'
    value=preferredUsername
    errors=changeset.error.preferredUsername.validation
    disabled=(not isEditing)
    validMark=true
    showError=true
  }}

  {{nypr-input
    label='Email'
    placeholder='you@mail.com'
    fieldname='email'
    value=changeset.email
    errors=changeset.error.email.validation
    disabled=(not isEditing)
    click=(action (mut touchedEmail) true)
  }}
  {{#if (and changeset.change.email touchedEmail)}}
    {{nypr-input
      label='Confirm Email'
      fieldname='confirmEmail'
      placeholder='Type your new email again'
      value=changeset.confirmEmail
      errors=changeset.error.confirmEmail.validation
      showError=true
    }}
  {{/if}}

  {{#if isEditing}}
  <div class="nypr-account-footer">
    <div class="nypr-account-footer-wrapper">
      <button
        class="nypr-account-cancel"
        data-test-selector="rollback"
        {{action 'rollback' changeset}}>Cancel</button>
        
      <button
        class="nypr-account-confirm"
        data-test-selector="save"
        {{action 'save' changeset}}>Save</button>
    </div>
  </div>
  {{/if}}
{{/nypr-card}}

{{#if isShowingModal}}
  {{#nypr-account-modal title="Re-enter Your Password" closeAction=(action 'closeModal') as |m|}}
    {{#m.body}}
    <p>
      You must re-enter your password to make changes to your email. The email you are changing is the one you use to log into the site.
    </p>
    {{nypr-input
      label='Password'
      type='password'
      fieldname='passwordForEmailChange'
      placeholder='Enter your password'
      value=password
      helplinkUrl="/accounts/forgot"
      helplinkText="Forgot Password?"
    }}
    {{/m.body}}
    
    {{#m.footer}}
      <button
        class="nypr-account-confirm"
        data-test-selector="check-pw"
        {{action 'verifyPassword'}}>Submit</button>
    {{/m.footer}}
  {{/nypr-account-modal}}
{{/if}}
  
